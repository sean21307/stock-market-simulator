<div class="flex min-h-screen items-center justify-center bg-surface dark:bg-surface-dark">
  <div class="w-full max-w-md p-8 shadow-lg rounded-lg bg-surface-alt dark:bg-surface-dark-alt">
    <h2 class="text-2xl font-bold text-center text-primary dark:text-primary-dark">
      {{ isLogin ? 'Login' : 'Sign Up' }}
    </h2>

    <form [formGroup]="authForm" (ngSubmit)="onSubmit()" class="mt-6">
      
      <!-- Username input (required for both login & signup) -->
      <div class="mb-4">
        <label class="flex w-fit items-center gap-1 pl-0.5 text-sm"
          [ngClass]="usernameInvalid ? 'text-danger' : 'text-on-surface dark:text-on-surface-dark'">
          <ng-container *ngIf="usernameInvalid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true" fill="currentColor" class="w-4 h-4">
              <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"/>
            </svg>
          </ng-container>
          Username
        </label>
        <input [ngClass]="{'border-danger': usernameInvalid}" type="text" formControlName="username" 
          class="w-full p-2 mt-1 border rounded outline-none bg-surface dark:bg-surface-dark text-on-surface dark:text-on-surface-dark focus:ring-2 focus:ring-outline dark:focus:ring-outline-dark">
        <ng-container *ngIf="usernameInvalid">
          <small class="pl-0.5 text-danger">Error: Username is required</small>
        </ng-container>
      </div>

      <!-- Email input (Only for Signup) -->
      <ng-container *ngIf="!isLogin">
        <div class="mb-4">
          <label class="flex w-fit items-center gap-1 pl-0.5 text-sm"
            [ngClass]="emailInvalid ? 'text-danger' : 'text-on-surface dark:text-on-surface-dark'">
            <ng-container *ngIf="emailInvalid">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true" fill="currentColor" class="w-4 h-4">
                <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"/>
              </svg>
            </ng-container>
            Email
          </label>
          <input [ngClass]="{'border-danger': emailInvalid}" type="email" formControlName="email" 
            class="w-full p-2 mt-1 border rounded outline-none bg-surface dark:bg-surface-dark text-on-surface dark:text-on-surface-dark focus:ring-2 focus:ring-outline dark:focus:ring-outline-dark">
          <ng-container *ngIf="emailInvalid">
            <small class="pl-0.5 text-danger">Error: {{ email?.hasError('required') ? 'Email is required' : 'Not a valid email' }}</small>
          </ng-container>
        </div>
      </ng-container>

      <!-- Password input -->
      <div class="mb-4">
        <label class="flex w-fit items-center gap-1 pl-0.5 text-sm"
          [ngClass]="passwordInvalid ? 'text-danger' : 'text-on-surface dark:text-on-surface-dark'">
          <ng-container *ngIf="passwordInvalid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true" fill="currentColor" class="w-4 h-4">
              <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"/>
            </svg>
          </ng-container>
          Password
        </label>
        <input [ngClass]="{'border-danger': passwordInvalid}" type="password" formControlName="password" class="w-full p-2 mt-1 border rounded outline-none bg-surface dark:bg-surface-dark text-on-surface dark:text-on-surface-dark focus:ring-2 focus:ring-outline dark:focus:ring-outline-dark">
        <ng-container *ngIf="passwordInvalid">
          <small class="pl-0.5 text-danger">Error: Password is required</small>
        </ng-container>
      </div>

      <!-- Confirm Password input (Only for Signup) -->
      <ng-container *ngIf="!isLogin">
        <div class="mb-4">
          <label class="block text-on-surface dark:text-on-surface-dark">Confirm Password</label>
          <input [ngClass]="{'border-danger': confirmPasswordInvalid}" type="password" formControlName="confirmPassword" class="w-full p-2 mt-1 border rounded outline-none bg-surface dark:bg-surface-dark text-on-surface dark:text-on-surface-dark focus:ring-2 focus:ring-outline dark:focus:ring-outline-dark">
          <ng-container *ngIf="confirmPasswordInvalid">
            <small class="pl-0.5 text-danger">Error: Passwords do not match</small>
          </ng-container>
        </div>
      </ng-container>

      <button type="submit" class="cursor-pointer w-full py-2 text-on-primary dark:text-on-primary-dark rounded bg-primary dark:bg-primary-dark hover:bg-secondary dark:hover:bg-secondary-dark">
        {{ isLogin ? 'Login' : 'Sign Up' }}
      </button>
    </form>

    <p class="mt-4 text-center text-on-surface dark:text-on-surface-dark">
      {{ isLogin ? "Don't have an account?" : 'Already have an account?' }}
      <button (click)="toggleAuth()" class="cursor-pointer text-info dark:text-on-info font-bold underline">
        {{ isLogin ? 'Sign Up' : 'Log In' }}
      </button>
    </p>
  </div>
</div>
